import json
import os
import numpy as np
from langchain_openai import OpenAIEmbeddings

# OpenAI API 키 설정
api_key = "sk-proj-NYJv3zchGmkTyIjMv7eHT3BlbkFJb0qrN0yn8oRjR5f7KmCM"
embeddings_model = OpenAIEmbeddings(api_key=api_key)

# 문장들의 리스트 - 임의의 문자열 예시

documents = [
    "손준성은 고려대학교 세종캠퍼스에서 어떤 전공을 했나요?",
    "고려대학교 세종캠퍼스에서의 학업 성적은 어떠했나요?",
    "손준성이 대학에서 가장 흥미로웠던 과목은 무엇이었나요?",
    "고려대학교 세종캠퍼스에서 진행한 프로젝트 중 가장 기억에 남는 것은 무엇인가요?",
    "대학 시절 손준성이 참여했던 동아리나 학생 조직은 무엇이었나요?",
    "고려대학교 세종캠퍼스에서의 교육이 손준성의 커리어에 어떤 영향을 미쳤나요?",
    "손준성이 대학에서 겪었던 가장 큰 도전은 무엇이었나요?",
    "고려대학교 세종캠퍼스에서 손준성에게 가장 영향을 준 교수는 누구였나요?",
    "손준성이 대학 생활 중에 참여했던 교외 활동은 무엇이었나요?",
    "손준성이 고려대학교 세종캠퍼스를 선택한 특별한 이유가 있었나요?",
    "대학에서 손준성이 사용한 주요 학습 자료나 기술은 무엇이었나요?",
    "고려대학교 세종캠퍼스에서의 졸업 요건을 손준성이 어떻게 충족시켰나요?",
    "손준성이 대학에서 참여한 인턴십이나 현장 실습은 무엇이었나요?",
    "대학교에서 손준성이 받았던 장학금이 있나요? 있다면, 어떤 종류의 장학금이었나요?",
    "고려대학교 세종캠퍼스에서의 대학 생활 중 가장 기억에 남는 순간은 무엇인가요?",
    "손준성이 대학에서 개발한 가장 중요한 기술이나 역량은 무엇인가요?",
    "대학 시절 손준성이 참여한 국내외 경진대회나 행사가 있나요?",
    "손준성이 학부생으로서 진행한 연구 활동은 무엇이었나요?",
    "고려대학교 세종캠퍼스에서 손준성이 최고의 성취로 생각하는 것은 무엇인가요?",

    "튜브메이커(tubemaker)는 어떤 기능을 제공하나요?",
    "튜브메이커(tubemaker)를 개발하게 된 동기는 무엇인가요?",
    "튜브메이커(tubemaker)의 사용자 인터페이스 디자인은 어떻게 구성되어 있나요?",
    "튜브메이커(tubemaker)에서 사용된 기술 스택에는 어떤 것들이 포함되어 있나요?",
    "튜브메이커(tubemaker)를 유지보수하고 업데이트하는 데 있어 주요 과제는 무엇인가요?",
    "튜브메이커(tubemaker)에서 제공하는 플레이리스트 공유 기능은 어떻게 작동하나요?",
    "튜브메이커(tubemaker)는 사용자들의 피드백을 어떻게 수집하고 있나요?",
    "튜브메이커(tubemaker)의 가장 인기 있는 기능은 무엇이며, 왜 그렇게 인기가 많은가요?",
    "튜브메이커(tubemaker) 개발 과정에서 겪었던 가장 큰 기술적 도전은 무엇이었나요?",
    "튜브메이커(tubemaker)의 향후 개발 계획에는 어떤 것들이 포함되어 있나요?",


    "스타트업(allko)의 allko.net은 어떤 서비스를 제공하나요?",
    "스타트업(allko)의 allko.net을 만들게 된 초기 아이디어는 무엇이었나요?",
    "스타트업(allko)의 allko.net에서 사용자들이 가장 많이 활용하는 기능은 무엇인가요?",
    "스타트업(allko)의 allko.net이 선택한 기술 스택에는 어떤 것들이 포함되어 있나요?",
    "스타트업(allko)의 allko.net을 개발하면서 겪었던 주요 도전은 무엇이었나요?",
    "스타트업(allko)의 allko.net에서 제공하는 커뮤니티 기능은 어떻게 구성되어 있나요?",
    "스타트업(allko)의 allko.net 사용자들의 피드백을 어떻게 수집하고 있나요?",
    "스타트업(allko)의 allko.net에서 정보를 공유하는 주요 채널은 무엇인가요?",
    "스타트업(allko)의 allko.net에서 향후 서비스 확장 계획은 어떻게 되어 있나요?",
    "스타트업(allko)의 allko.net이 사용자들에게 어떤 특별한 가치를 제공하나요?",


    "Just Go 프로젝트에서 사용한 ChatGPT API는 어떤 방식으로 사용자의 요구를 파악했나요?",
    "Just Go 프로젝트의 맞춤형 여행 경로 추천 시스템은 어떤 기술적 특징을 가지고 있나요?",
    "Just Go 프로젝트를 개발하면서 겪었던 가장 큰 기술적 도전은 무엇이었나요?",
    "Just Go 프로젝트에서 사용자 경험을 개선하기 위해 취한 특별한 조치가 있었나요?",
    "Just Go 프로젝트에서 프로젝트의 우수상 수상에 기여한 핵심 요소는 무엇이었나요?",
    "Just Go 프로젝트의 앞으로의 확장 계획에는 어떤 것들이 포함되어 있나요?",
    "Just Go 프로젝트에서 처음으로 도입한 llm 기술은 어떤 새로운 가능성을 열었나요?",


    "Catch Up 프로젝트에서 개발한 위치기반 버스킹 특화 방송 플랫폼의 주요 기능은 무엇인가요?",
    "Catch Up 프로젝트의 API 개발을 담당하면서 사용한 기술 스택은 무엇이었나요?",
    "Catch Up 프로젝트 초기에 팀원 이탈이 발생했을 때, 어떤 유연한 전략 조정을 통해 문제를 해결했나요?",
    "Catch Up 프로젝트에서 위치 기반 서비스를 구현하기 위해 사용한 주요 기술은 무엇인가요?",
    "Catch Up 프로젝트를 진행하면서 겪었던 가장 큰 기술적 도전은 무엇이었나요?",
    "Catch Up 프로젝트가 우수상을 수상할 수 있었던 결정적인 요소는 무엇이었나요?",
    "Catch Up 프로젝트에서 API 개발을 할 때 중점을 둔 부분은 무엇이었나요?",
    "Catch Up 프로젝트에서 데이터 보안과 사용자 프라이버시를 어떻게 보장했나요?",
    "Catch Up 프로젝트에서 사용자 경험을 개선하기 위해 취한 조치는 무엇이었나요?",
    "Catch Up 프로젝트의 미래 확장 계획에는 어떤 것들이 포함되어 있나요?",


    "Momo 프로젝트에서 구현한 모임통장 기능의 주요 특징은 무엇인가요?",
    "Momo 프로젝트에서 도입한 마이크로서비스 아키텍처(MSA)의 구체적인 구성은 어떻게 되나요?",
    "Kubernetes를 사용하여 인프라를 설정한 이유와 그 과정에서의 주요 도전은 무엇이었나요?",
    "Jenkins를 사용한 지속적 통합 및 배포(CI/CD) 과정을 구축하는 데 있어서 중점을 둔 부분은 무엇이었나요?",
    "Momo 프로젝트에서 AI를 통해 모임에게 카드를 추천하거나 상세 리포트를 작성하는 기능은 어떻게 구현했나요?",
    "프로젝트에서 AI 기능을 개발하면서 사용한 주요 기술과 라이브러리는 무엇이었나요?",
    "Momo 프로젝트에서 팀 작업을 조직하고 관리한 방법은 무엇이었나요?",
    "프로젝트 팀원들과의 협업에서 겪었던 주요 도전과 해결책은 무엇이었나요?",
    "Momo 프로젝트가 핀테크 분야에서 제공하는 독특한 가치는 무엇이라고 생각하나요?",
    "프로젝트의 미래 확장 계획에는 어떤 기능이나 개선사항이 포함되어 있나요?",



    "포스코 인터네셔널(posco)과의 기업연계 프로젝트에서 개발한 챗봇은 어떤 주요 기능들을 제공하나요?",
    "포스코 인터네셔널(posco) 기업연계 직원들이 ChatGPT로 질문하지 않는 이유를 파악하기 위해 어떤 방법을 사용했나요?",
    "포스코 인터네셔널(posco) 기업연계 프로젝트에서 구현한 '기능 추천' 시스템은 어떻게 작동하나요?",
    "포스코 인터네셔널(posco) 기업연계 프로젝트에서 Langchain 기술을 챗봇 개발에 통합하는 과정에서 겪었던 주요 도전은 무엇이었나요?",
    "포스코 인터네셔널(posco) 기업연계 프로젝트의 AI 구성 요소를 개발할 때 주로 사용한 도구와 라이브러리는 무엇인가요?",
    "포스코 인터네셔널(posco)의 사내 Teams 활성화를 위해 챗봇이 어떻게 도움을 주고 있나요?",
    "포스코 인터네셔널(posco) 기업연계 프로젝트를 통해 얻은 주요 인사이트나 배움은 무엇이었나요?",
    "포스코 인터네셔널(posco)와의 기업연계 프로젝트를 진행하면서 AI 팀원으로서의 역할은 구체적으로 무엇이었나요?",
    "포스코 인터네셔널(posco) 기업연계 프로젝트의 향후 개발 계획과 확장 가능성에 대해 설명해주세요.",
    "포스코 인터네셔널(posco) 기업연계 프로젝트가 포스코 인터네셔널 내에서 기대하는 장기적인 영향은 무엇인가요?",


    "어떤 종류의 프로젝트를 주로 진행해왔나요?",
    "최근에 참여한 프로젝트에 대해 간단히 설명해줄 수 있나요?",
    "가장 기억에 남는 프로젝트는 무엇이었고, 그 이유는 무엇인가요?",
    "개인적으로 참여한 프로젝트 중에서 가장 도전적이었던 프로젝트는 무엇이었나요?",
    "프로젝트를 진행하면서 사용한 기술 중 가장 흥미로웠던 것은 무엇인가요?",
    "프로젝트를 통해 배운 가장 중요한 교훈은 무엇이었나요?",
    "프로젝트 팀 구성은 어떻게 되었나요? 주로 어떤 역할을 맡았나요?",
    "프로젝트 진행 과정에서 겪었던 가장 큰 어려움은 무엇이었나요?",
    "프로젝트의 성공적인 완수를 위해 특별히 신경 썼던 부분은 무엇인가요?",
    "앞으로 진행하고 싶은 프로젝트 유형이 있다면, 그것은 무엇인가요?",



    "Springboot를 사용하여 어떤 종류의 프로젝트를 진행했나요?",
    "Langchain 기술을 활용한 프로젝트에서의 주요 역할과 구현 기능은 무엇이었나요?",
    "사용한 기술 스택 중에서 가장 익숙하고 선호하는 것은 무엇인가요?",
    "Springboot와 같은 백엔드 프레임워크를 사용할 때 가장 중점을 두는 성능 기준은 무엇인가요?",
    "Langchain을 프로젝트에 통합할 때 겪었던 주요 도전과 그 해결책은 무엇이었나요?",
    "다양한 기술 스택을 배우고 적용하면서 개인적으로 가장 효과적이라고 느낀 학습 방법은 무엇인가요?",
    "프로젝트에서 새로운 기술 스택을 도입할 때 고려하는 주요 요소는 무엇인가요?",
    "사용해 본 기술 스택 중 향후 더 깊이 연구하고 싶은 영역은 어디인가요?",
    "프로젝트에서 기술 스택을 결정할 때 팀원들과 어떻게 협의하나요?",
    "지금까지 사용해보지 않았지만, 앞으로 도전하고 싶은 기술 스택은 무엇인가요?",


    "손준성의 가장 좋아하는 취미는 무엇인가요?",
    "록 음악을 부르는 것에 대한 손준성의 열정은 어떻게 시작되었나요?",
    "손준성이 즐겨 찾는 노래방에서 가장 자주 부르는 노래는 무엇인가요?",
    "손준성이 참여하는 사회적 활동은 주로 어떤 것들인가요?",
    "취미를 통해 만난 사람들 중 인상 깊었던 인물은 누구이며, 그 이유는 무엇인가요?",
    "손준성이 취미 활동을 통해 배운 가장 중요한 교훈은 무엇인가요?",
    "사회적 활동에 참여하게 된 계기는 무엇인가요?",
    "손준성이 사회적 활동을 통해 이루고 싶은 목표는 무엇인가요?",
    "취미가 손준성의 일상 생활이나 직업에 어떤 영향을 미치고 있나요?",
    "손준성이 취미를 통해 시도해보고 싶은 새로운 활동은 무엇인가요?",


    "SSAFY에서 진행한 팀 프로젝트의 목표는 무엇이었나요?",
    "팀 프로젝트에서 손준성의 역할은 구체적으로 무엇이었나요?",
    "팀워크를 향상시키기 위해 사용한 특별한 방법이나 도구가 있었나요?",
    "팀 프로젝트를 진행하면서 겪었던 가장 큰 도전은 무엇이었고, 이를 어떻게 해결했나요?",
    "팀원 간의 의견 충돌을 어떻게 조율하고 해결했나요?",
    "SSAFY에서의 팀 경험에서 얻은 가장 중요한 교훈은 무엇인가요?",
    "팀 프로젝트의 성공을 위해 가장 중요하게 생각한 요소는 무엇이었나요?",
    "SSAFY 프로젝트에서 협업을 효과적으로 진행하기 위해 적용한 전략은 무엇이었나요?",
    "팀 프로젝트에서 어떻게 각 팀원의 장점을 최대한 활용했나요?",
    "향후 팀 프로젝트를 진행할 때 SSAFY에서의 경험을 어떻게 활용할 계획인가요?"

]




# 임베딩 파일 경로 설정
embeddings_file = 'embeddings_js.json'

def save_embeddings_to_file(texts, embeddings, filename):
    """문장과 임베딩 벡터를 각각의 배열로 JSON 파일에 저장합니다."""
    data = {
        'text': texts,
        'embedding': [emb.tolist() for emb in embeddings]
    }
    with open(filename, 'w') as file:
        json.dump(data, file)

def load_embeddings_from_file(filename):
    """JSON 파일에서 문장과 임베딩 벡터를 로드합니다."""
    with open(filename, 'r') as file:
        data = json.load(file)
    embeddings = np.array(data['embedding'])
    texts = data['text']
    return embeddings, texts

# 파일이 존재하는지 확인하고, 없다면 임베딩 생성 후 저장
if not os.path.exists(embeddings_file):
    embeddings = embeddings_model.embed_documents(documents)
    embeddings_array = np.array(embeddings)  # 임베딩을 NumPy 배열로 변환
    save_embeddings_to_file(documents, embeddings_array, embeddings_file)
    print("임베딩 진행 (유료)")
else:
    embeddings_array, documents = load_embeddings_from_file(embeddings_file)  # 파일에서 로드
    print("이미 임베딩 있음 (무료)")
